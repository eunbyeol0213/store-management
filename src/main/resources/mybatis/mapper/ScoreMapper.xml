<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycompany.webapp.score.dao.IScoreRepository">
<select id="getAllGroupCodes" resultType="map">
SELECT check_group_code
		, check_group_content
		, check_group_occupied
	FROM check_group
</select>
<select id="getDetailCodes" parameterType="String" resultType="map">
SELECT LPAD(check_detail_code,2,0) AS check_detail_code
		, check_detail_content
		, check_detail_occupied
	FROM check_detail
	WHERE check_group_code = #{groupCode}
</select>




<!-- 조회 -->
<select id="getScoreList"  resultType="com.mycompany.webapp.score.vo.ScoreVO">
<![CDATA[
	SELECT 
		CENTER_CODE					 AS "centerCode",
		USER_CODE 					 AS "userCode",
		CHECK_YEAR 					 AS "checkYear",
		CHECK_SEASON				 AS "checkSeason",
		CHECK_GROUP_CODE			 AS "checkGroupCode",
		CHECK_DETAIL_CODE			 As "checkDetailCode",
		CHECK_SCORE					 AS "checkScore"
	
	from inspection
]]>

</select>

<!-- 점수 수정 -->

<update id="saveScore" parameterType="com.mycompany.webapp.score.vo.ScoreVO">
<![CDATA[

	update inspection
	set CHECK_SCORE=#{checkScore}

]]>

</update> 
<update id="updateDetailCode" parameterType="map">
UPDATE check_detail 
	SET check_detail_content = #{detailContent},
		check_detail_occupied = #{detailOccupied}
	WHERE check_group_code = #{groupCode} AND check_detail_code = #{detailCode}
</update>
</mapper>